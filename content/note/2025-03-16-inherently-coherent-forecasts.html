---
title: Inherently Coherent Forecasts
author: Tim Radtke
date: '2025-03-16'
slug: inherently-coherent-forecasts
categories:
tags:
---



<p>Suppose you offer a single API endpoint that takes historical observations of one time series at a time (not unlike <a href="https://docs.nixtla.io/reference/forecast_forecast_post">Nixtla’s TimeGPT</a>). Suppose further that everyone at your company uses this endpoint to generate any business forecast they need. What behaviors should the API’s forecast exhibit?</p>
<p>An obvious one would be <a href="https://otexts.com/fpp3/hierarchical.html">forecast coherence across aggregation levels</a>. Say your company sells three products. You have the historical revenue for the three products, <span class="math inline">\(Y_1\)</span>, <span class="math inline">\(Y_2\)</span>, <span class="math inline">\(Y_3\)</span>, as well as the historical revenue for the company as a whole, <span class="math inline">\(Y\)</span>, where <span class="math inline">\(Y=Y_1+Y_2+Y_3\)</span>. When you feed <span class="math inline">\(Y_1\)</span> into the API, the API returns forecast <span class="math inline">\(\text{API}(Y_1)=\hat{Y}_1\)</span>. It returns <span class="math inline">\(\hat{Y}_2\)</span> given <span class="math inline">\(Y_2\)</span>, <span class="math inline">\(\hat{Y}_3\)</span> given <span class="math inline">\(Y_3\)</span>, and given <span class="math inline">\(Y\)</span> it returns <span class="math inline">\(\hat{Y}\)</span>. If we want to see a forecast at company-level that “makes sense” given product-level forecasts, we want the forecasts to be coherent: <span class="math inline">\(\hat{Y}=\hat{Y}_1 + \hat{Y}_2 + \hat{Y}_3\)</span>. But given that the API only ever sees one time series at a time, what model could be used to provide coherent forecasts?</p>
<p>Again, keep in mind that the API doesn’t have access to more information than its current input. For example, when you feed it <span class="math inline">\(Y_2\)</span>, it doesn’t know that <span class="math inline">\(Y_1\)</span> and <span class="math inline">\(Y_3\)</span> exist. It also doesn’t know whether <span class="math inline">\(Y_2\)</span> is at the hierarchy’s bottom- or top-level. The API does not have access to all possible time series that exist at the company. Consequently, the API does not have the information required to apply the methods from the <a href="https://otexts.com/fpp3/hierarchical.html">vast</a> <a href="https://proceedings.mlr.press/v139/rangapuram21a.html">literature</a> <a href="https://arxiv.org/abs/2502.15983">on</a> <a href="https://www.tandfonline.com/doi/full/10.1080/01621459.2018.1448825">coherent</a> <a href="https://proceedings.mlr.press/v70/taieb17a.html">forecasts</a>. What modeling approach will return coherent forecasts nevertheless?</p>
<p>The seasonal naive method would. As would the naive method, of course. The mean forecast, too. And any other linear combination of the past observations with a pre-determined context length and coefficients.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> Any pre-trained—the coefficients must not change depending on the input provided to the API—linear autoregressive model of order p will do.</p>
<p>That’s a fairly flexible model family. It also includes the <a href="https://arxiv.org/abs/2312.14657">Non-Parametric Time Series Forecaster</a> and <a href="https://minimizeregret.com/post/2023/10/19/threedx">threedx</a>. Thus, the API could do an OK job for most series passed to it. It would have an obvious weakness in new or recently discontinued time series, though. The API could not, for example, override its usual forecast for a recently discontinued product and forecast zero instead. The same holds for any other kind of structural break as well as anomalies. That would make it tough to rely exclusively on such an API for operational decisions happening at the low hierarchy level ridden with discontinuities.</p>
<p>The above combined with <a href="https://minimizeregret.com/linked/2025/02/23/performance-of-zero-shot-time-series-foundation-models-on-cloud-data/">recent evidence</a> make me inclined to offer the seasonal naive method as <em>Zero-Shot Foundation Model with Inherently Coherent Forecasts</em> available as API.</p>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>For example, the mean forecast must not be the mean of the provided observations, but the mean of <span class="math inline">\(k\)</span> observations resulting in coefficients <span class="math inline">\(1/k\)</span>. A time series with <span class="math inline">\(n&lt;k\)</span> observations needs to be padded with zeros. A time series with <span class="math inline">\(n&gt;k\)</span> observations is shortened to the <span class="math inline">\(k\)</span> most recent observations.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
